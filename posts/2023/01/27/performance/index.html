<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Ronalds Vilcins - https://karthikselvam.com/"><title>System Performance | Karthik Selvam</title><meta name=description content="2023"><meta name=twitter:card content="summary"><meta name=twitter:title content="System Performance"><meta name=twitter:description content="2023"><meta property="og:title" content="System Performance"><meta property="og:description" content="2023"><meta property="og:type" content="article"><meta property="og:url" content="https://karthikselvam.com/posts/2023/01/27/performance/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-27T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-27T00:00:00+00:00"><meta itemprop=name content="System Performance"><meta itemprop=description content="2023"><meta itemprop=datePublished content="2023-01-27T00:00:00+00:00"><meta itemprop=dateModified content="2023-01-27T00:00:00+00:00"><meta itemprop=wordCount content="564"><meta itemprop=keywords content="fundamentals,"><link rel=canonical href=https://karthikselvam.com/posts/2023/01/27/performance/><link rel=dns-prefetch href=https://www.google-analytics.com><link href=https://www.google-analytics.com rel=preconnect crossorigin><link rel=alternate type=application/atom+xml title="Karthik Selvam" href=https://karthikselvam.com/atom.xml><link rel=alternate type=application/json title="Karthik Selvam" href=https://karthikselvam.com/feed.json><script src=https://kit.fontawesome.com/8d06e0a013.js crossorigin=anonymous></script>
<link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeSpeed}.posts hr{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:none;border-bottom:1px #353535;flex:1 0 1rem}main{max-width:70ch;padding:2ch;margin:auto}a,body{color:#353535}::selection,a:focus,a:hover{background-color:#353535;color:#fff}.meta{margin:0 0 2.5rem}.tags::before{content:"\2022";margin-left:1rem}code,pre{color:#353535;font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;border:1px solid #353535;font-size:small}code{padding:.1rem;border:none}pre{padding:.5rem;overflow-x:auto}pre code{border:none}img{max-width:100%;border:1px solid #353535}hr{background:#353535;height:1px;border:0}ul{list-style-type:square}ul,ol{padding-left:1.2rem}header li,footer li{display:inline;text-transform:uppercase}header a,footer a{text-decoration:none}header ul,footer ul{justify-content:space-between;display:flex}header,section,footer{padding:1rem 0}blockquote{border-left:5px solid #353535;padding-left:1rem}.posts ul,header ul,footer ul{list-style:none}.posts,header ul,footer ul{padding:0}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.7rem}.posts li a,.posts li div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.hash{opacity:.25;text-decoration:none}table{border-collapse:collapse;text-align:left;width:100%}table tr{background:#fff;border-bottom:1px solid}table th,table td{padding:10px 20px}</style><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"System Performance","headline":"System Performance","alternativeHeadline":"","description":"2023","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/karthikselvam.com\/posts\/2023\/01\/27\/performance\/"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"Karthik Selvam","copyrightYear":"2023","dateCreated":"2023-01-27T00:00:00.00Z","datePublished":"2023-01-27T00:00:00.00Z","dateModified":"2023-01-27T00:00:00.00Z","publisher":{"@type":"Organization","name":"Karthik Selvam","url":"https://karthikselvam.com/","logo":{"@type":"ImageObject","url":"https:\/\/karthikselvam.com\/","width":"32","height":"32"}},"image":"https://karthikselvam.com/","url":"https:\/\/karthikselvam.com\/posts\/2023\/01\/27\/performance\/","wordCount":"564","genre":["fundamentals"],"keywords":["fundamentals"]}</script></head><body><main><header><nav><ul><li><a href=/>Blog</a></li><li><a href=/about/>@Karthik</a></li><li><a href=https://twitter.com/karthiikselvam><i class="fa-brands fa-twitter"></i></a>
&nbsp;&nbsp;
<a href=https://www.instagram.com/karthiikselvam/><i class="fa-brands fa-instagram"></i></a>
&nbsp;&nbsp;
<a href=https://www.linkedin.com/in/karthiiks/><i class="fa-brands fa-linkedin"></i></a></li></ul></nav></header><hr><section><h2 itemprop="name headline">System Performance</h2><p class=meta><time itemprop=datePublished datetime=2023-01-27>January 27, 2023</time> &bull;
<a href=/tags/fundamentals>fundamentals</a></p><span itemprop=articleBody><h3 id=performance>Performance <a href=#performance class=hash>#</a></h3><p>Measure of how fast or responsive a system is under</p><ul><li>A given workload</li><li>A given hardware setup</li></ul><p>Performance Goals - As we increase workload the performance be stable or should not severely degrade the performance. If we increase hardware capacity the performance should ideally increase.</p><p>How to spot performance problems ?
Every performance problems is result of some queue building somewhere. Ex: Network socket queue, DB IO queue, OS run queue etc.</p><p>Reasons for queue build up ?</p><ul><li>Inefficient slow processing</li><li>Serial resource access</li><li>Limited resource capacity</li></ul><p>So while designing systems identify where queues build up can happen and avoid it.</p><hr><h3 id=performance-principles>Performance Principles <a href=#performance-principles class=hash>#</a></h3><ul><li><p>Efficiency :</p><ul><li>Efficient resource utilization<ul><li>IO - memory, network, disk</li><li>CPU</li></ul></li><li>Efficient logic<ul><li>Aglorithms</li><li>DB queries</li></ul></li><li>Efficient data storage<ul><li>Data Structures</li><li>DB schema</li></ul></li><li>Caching</li></ul></li><li><p>Concurrency</p><ul><li>Hardware</li><li>Software<ul><li>Quequeing</li><li>Coherence</li></ul></li></ul></li><li><p>Capacity : Identifying a performance problem whether it is a concurrency/efficiency or capacity problem is a hard task.</p></li></ul><hr><h3 id=system-peformance-objectives>System Peformance Objectives <a href=#system-peformance-objectives class=hash>#</a></h3><ul><li><p>Minimize request-response latency</p><ul><li>Latency is measured in time units</li><li>Depends on wait/idle time and processing time</li></ul></li><li><p>Maximize throughput</p><ul><li>Throughtput is measured as Rate of request processing and depends on latency and capacity.</li></ul></li></ul><h3 id=performance-measurement-metrics>Performance Measurement Metrics <a href=#performance-measurement-metrics class=hash>#</a></h3><ul><li><p>Latency</p><ul><li>Affects : user experience</li><li>Desired : As low as possible</li></ul></li><li><p>Throughtput</p><ul><li>Affects : number of users that can be supported</li><li>Desired : greater than the request rate</li></ul></li><li><p>Errors</p><ul><li>Affects : functional correctness</li><li>Desired : None</li></ul></li><li><p>Resource saturation</p><ul><li>Affects : hardware capacity required</li><li>Desired : Efficient utilization of all system resources</li></ul></li><li><p>Tail latency : Indication of quequing of requets and gets worse with higher workloads</p></li><li><p>Measure 99 percentile latency because average latency hides effects of tail latency</p></li></ul><hr><h3 id=serial-request-latency>Serial Request Latency <a href=#serial-request-latency class=hash>#</a></h3><ul><li><p>Network Latency</p><ul><li>Data Transfer(Global/Regional/Local Network)</li><li>TCP connection - Three way handshake</li><li>SSL/TLS connection - On top of TCP</li></ul></li><li><p>Minimizing Network Latency</p><ul><li><p>On Database side:</p><ul><li>Connection pool : We can create connection and reuse the connection and reduce connection creation latency.</li><li>Data transfer Overhead : Reduce the size of data or don&rsquo;t transfer the data at all(use cache).</li></ul></li><li><p>On client side:</p><ul><li>Use Persistent connections</li><li>Static data caching</li><li>Data format and compression</li><li>SSL Session caching : reduce the repeated new connection creation between client and server</li></ul></li></ul></li><li><p>Memory Latency</p><ul><li>Finite Heap memory : Increase garbage collection frequency</li><li>GC Alogrithm : Use proper alogrithm</li><li>Finite Buffer memory on Database</li></ul></li><li><p>Minimizing memory latency</p><ul><li>Avoid memory bloat : process should accupy as little memory as possible</li><li>Weak/Soft References : allows GC to destroy the objects when running out of memory</li><li>Multiple smaller processes are better than single process</li><li>Garbage collection algorithm : Different flavors available(live process vs batch process)</li><li>Allocate Finite buffer memory on database to improve database performance<ul><li>Normalization : reduce redundancy</li><li>Compute Over Storage</li></ul></li></ul></li><li><p>Disk Latency</p><ul><li>Disk access latency - Web server need to access files like html and javascript files which need to loaded from disk and can cause huge latency</li></ul></li><li><p>Disk Latency Approaches</p><ul><li>Sequential IO and Random IO</li><li>Asynchronous logging</li><li>Static data can handled by reverse proxy(Page cache and Zero copy)</li><li>Query optimization and Indexing</li><li>Data caching</li><li>Hardware Level - SSD Disk, RAID(Parallel Access), Higer Input Output per seconds IOPS.</li></ul></li><li><p>CPU Latency</p><ul><li>Inefficient Algorithms</li><li>Context Switching</li></ul></li><li><p>CPU Latency Approaches</p><ul><li>Batch / Async IO</li><li>Single Threaded Model</li><li>Thread Pool Size</li><li>Multiprocess in Virtual Env</li></ul></li></ul><hr><h3 id=concurrent-request-latency>Concurrent Request Latency <a href=#concurrent-request-latency class=hash>#</a></h3><ul><li>Concurrent Processing<ul><li>Amdhal&rsquo;s Law : Have minimum serial request processing.</li><li>Univsersal Scalability Law : Queueing + Coherence( caching of variables and there synchronization across threads)</li></ul></li></ul></span></section><hr><footer><nav><ul><li>© 2024 Karthik Selvam</li><li><a href=https://twitter.com/karthiikselvam><i class="fa-brands fa-twitter"></i></a>
&nbsp;&nbsp;
<a href=https://www.instagram.com/karthiikselvam/><i class="fa-brands fa-instagram"></i></a>
&nbsp;&nbsp;
<a href=https://www.linkedin.com/in/karthiiks/><i class="fa-brands fa-linkedin"></i></a></li></ul></nav></footer></main></body></html>