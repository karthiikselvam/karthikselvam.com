<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Ronalds Vilcins - https://karthikselvam.com/"><title>Using Collections the right way | Karthik Selvam</title><meta name=description content="2023"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using Collections the right way"><meta name=twitter:description content="2023"><meta property="og:title" content="Using Collections the right way"><meta property="og:description" content="2023"><meta property="og:type" content="article"><meta property="og:url" content="https://karthikselvam.com/posts/2023/02/23/collections/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-23T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-23T00:00:00+00:00"><meta itemprop=name content="Using Collections the right way"><meta itemprop=description content="2023"><meta itemprop=datePublished content="2023-02-23T00:00:00+00:00"><meta itemprop=dateModified content="2023-02-23T00:00:00+00:00"><meta itemprop=wordCount content="767"><meta itemprop=keywords content="interview,"><link rel=canonical href=https://karthikselvam.com/posts/2023/02/23/collections/><link rel=dns-prefetch href=https://www.google-analytics.com><link href=https://www.google-analytics.com rel=preconnect crossorigin><link rel=alternate type=application/atom+xml title="Karthik Selvam" href=https://karthikselvam.com/atom.xml><link rel=alternate type=application/json title="Karthik Selvam" href=https://karthikselvam.com/feed.json><script src=https://kit.fontawesome.com/8d06e0a013.js crossorigin=anonymous></script>
<link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeSpeed}.posts hr{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:none;border-bottom:1px #353535;flex:1 0 1rem}main{max-width:70ch;padding:2ch;margin:auto}a,body{color:#353535}::selection,a:focus,a:hover{background-color:#353535;color:#fff}.meta{margin:0 0 2.5rem}.tags::before{content:"\2022";margin-left:1rem}code,pre{color:#353535;font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;border:1px solid #353535;font-size:small}code{padding:.1rem;border:none}pre{padding:.5rem;overflow-x:auto}pre code{border:none}img{max-width:100%;border:1px solid #353535}hr{background:#353535;height:1px;border:0}ul{list-style-type:square}ul,ol{padding-left:1.2rem}header li,footer li{display:inline;text-transform:uppercase}header a,footer a{text-decoration:none}header ul,footer ul{justify-content:space-between;display:flex}header,section,footer{padding:1rem 0}blockquote{border-left:5px solid #353535;padding-left:1rem}.posts ul,header ul,footer ul{list-style:none}.posts,header ul,footer ul{padding:0}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.7rem}.posts li a,.posts li div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.hash{opacity:.25;text-decoration:none}table{border-collapse:collapse;text-align:left;width:100%}table tr{background:#fff;border-bottom:1px solid}table th,table td{padding:10px 20px}</style><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Using Collections the right way","headline":"Using Collections the right way","alternativeHeadline":"","description":"2023","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/karthikselvam.com\/posts\/2023\/02\/23\/collections\/"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"Karthik Selvam","copyrightYear":"2023","dateCreated":"2023-02-23T00:00:00.00Z","datePublished":"2023-02-23T00:00:00.00Z","dateModified":"2023-02-23T00:00:00.00Z","publisher":{"@type":"Organization","name":"Karthik Selvam","url":"https://karthikselvam.com/","logo":{"@type":"ImageObject","url":"https:\/\/karthikselvam.com\/","width":"32","height":"32"}},"image":"https://karthikselvam.com/","url":"https:\/\/karthikselvam.com\/posts\/2023\/02\/23\/collections\/","wordCount":"767","genre":["interview"],"keywords":["interview"]}</script></head><body><main><header><nav><ul><li><a href=/>Blog</a></li><li><a href=/about/>@Karthik</a></li><li><a href=https://twitter.com/karthiikselvam><i class="fa-brands fa-twitter"></i></a>
&nbsp;&nbsp;
<a href=https://www.instagram.com/karthiikselvam/><i class="fa-brands fa-instagram"></i></a>
&nbsp;&nbsp;
<a href=https://www.linkedin.com/in/karthiiks/><i class="fa-brands fa-linkedin"></i></a></li></ul></nav></header><hr><section><h2 itemprop="name headline">Using Collections the right way</h2><p class=meta><time itemprop=datePublished datetime=2023-02-23>February 23, 2023</time> &bull;
<a href=/tags/interview>interview</a></p><span itemprop=articleBody><h3 id=iterating-through-a-list>Iterating through a List <a href=#iterating-through-a-list class=hash>#</a></h3><ol><li>Iterating through a List using Index.</li></ol><p>Iterating through a list is a basic operation on a collection, but over the years it’s gone through a few significant changes. We’ll begin with the old and evolve an example—enumerating a list of names—to the elegant style.</p><pre><code class=language-java>final List&lt;String&gt; friends = Arrays.asList(&quot;Brian&quot;, &quot;Nate&quot;, &quot;Neal&quot;, &quot;Raju&quot;, &quot;Sara&quot;, &quot;Scott&quot;);
</code></pre><p>Here’s the habitual, but not so desirable, way to iterate and print each of the elements</p><pre><code class=language-java>for(int i = 0; i &lt; friends.size(); i++) {
    System.out.println(friends.get(i));
}
</code></pre><ol start=2><li>Iterating through a List using Iterator.</li></ol><pre><code class=language-java>for(String name : friends) {
    System.out.println(name);
}
</code></pre><p>Under the hood this form of iteration uses the Iterator interface and calls into its hasNext() and next() methods.Both these versions are external iterators, which mix how we do it with what we’d like to achieve. We explicitly control the iteration with them, indicating where to start and where to end; the second version does that under the hood using the Iterator methods. With explicit control, the break and continue statements can also help manage the iteration’s flow of control.</p><ol start=3><li>Using forEach</li></ol><pre><code class=language-java>friends.forEach(new Consumer&lt;String&gt;() {
    public void accept(final String name) {
         System.out.println(name);
}
});
</code></pre><p>we traded in the old for loop for the new internal iterator forEach(). As for the benefit, we went from specifying how to iterate to focusing on what we want to do for each element.</p><ol start=4><li>Using lambda expressions</li></ol><pre><code class=language-java>friends.forEach((final String name) -&gt; System.out.println(name));
</code></pre><p>The underlying library takes control of how the lambda expressions are evaluated. It can decide to perform them lazily, in any order, and exploit parallelism as it sees fit.</p><p>The Java compiler also offers some lenience and can infer the types. Leaving out the type is convenient, requires less effort, and is less noisy. Here’s the previous code without the type information.</p><pre><code class=language-java>friends.forEach((name) -&gt; System.out.println(name));
</code></pre><h3 id=transforming-a-list>Transforming a List <a href=#transforming-a-list class=hash>#</a></h3><p>Java’s String is immutable, so instances can’t be changed. We could create new strings in all caps and replace the appropriate elements in the collection. However, the original collection would be lost; also, if the original list is immutable, like it is when created with Arrays.asList(), then the list can’t change. Another downside is it would be hard to parallelize the computations.Creating a new list that has the elements in all caps is a better option.</p><pre><code class=language-java>final List&lt;String&gt; uppercaseNames = new ArrayList&lt;String&gt;();
    for(String name : friends) {
        uppercaseNames.add(name.toUpperCase());
}
</code></pre><p>As a first step to move toward a functional style, we could use the internal iterator forEach() method.</p><pre><code class=language-java>final List&lt;String&gt; uppercaseNames = new ArrayList&lt;String&gt;();
friends.forEach(name -&gt; uppercaseNames.add(name.toUpperCase()));
System.out.println(uppercaseNames);
</code></pre><p>We used the internal iterator, but that still required the empty list and the effort to add elements to it.</p><p>Using Lambda Expressions : The map() method of a new Stream interface can help us avoid mutability and make the code concise</p><pre><code class=language-java>friends.stream()
.map(name -&gt; name.toUpperCase())
.forEach(name -&gt; System.out.print(name + &quot; &quot;));
</code></pre><p>The map() method is quite useful to map or transform an input collection into a new output collection. This method will ensure that the same number of elements exists in the input and the output sequence. However, element types in the input don’t have to match the element types in the output collection.</p><h3 id=finding-elements>Finding Elements <a href=#finding-elements class=hash>#</a></h3><p>The now-familiar elegant methods to traverse and transform collections will not directly help pick elements from a collection. The filter() method is designed for that purpose.</p><p>From a list of names, let’s pick the ones that start with the letter N. Since there may be zero matching names in the list, the result may be an empty list. Let’s first code it using the old approach.</p><pre><code class=language-java>final List&lt;String&gt; startsWithN = new ArrayList&lt;String&gt;();
for(String name : friends) {
    if(name.startsWith(&quot;N&quot;)) {
        startsWithN.add(name);
    }
}
</code></pre><p>Let’s refactor this code to use the filter() method.</p><pre><code class=language-java>final List&lt;String&gt; startsWithN = friends.stream()
                                .filter(name -&gt; name.startsWith(&quot;N&quot;))
                                .collect(Collectors.toList());
</code></pre><p>The filter() method expects a lambda expression that returns a boolean result. If the lambda expression returns a true, the element in context while executing that lambda expression is added to a result collection; it’s skipped otherwise. Finally the method returns a Stream with only elements for which the lambda expression yielded a true.</p><p>The filter() method returns an iterator just like the map() method does, but the similarity ends there. Whereas the map() method returns a collection of the same size as the input collection, the filter() method may not. It may yield a result collection with a number of elements ranging from zero to the maximum number of elements in the input collection. However, unlike map(), the elements in the result collection that filter() returned are a subset of the elements in the input collection.</p></span></section><hr><footer><nav><ul><li>© 2024 Karthik Selvam</li><li><a href=https://twitter.com/karthiikselvam><i class="fa-brands fa-twitter"></i></a>
&nbsp;&nbsp;
<a href=https://www.instagram.com/karthiikselvam/><i class="fa-brands fa-instagram"></i></a>
&nbsp;&nbsp;
<a href=https://www.linkedin.com/in/karthiiks/><i class="fa-brands fa-linkedin"></i></a></li></ul></nav></footer></main></body></html>