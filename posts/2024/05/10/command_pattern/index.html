<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Ronalds Vilcins - https://karthikselvam.com/"><title>Command Pattern | Karthik Selvam</title><meta name=description content="2024"><meta name=twitter:card content="summary"><meta name=twitter:title content="Command Pattern"><meta name=twitter:description content="2024"><meta property="og:title" content="Command Pattern"><meta property="og:description" content="2024"><meta property="og:type" content="article"><meta property="og:url" content="https://karthikselvam.com/posts/2024/05/10/command_pattern/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-10T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-10T00:00:00+00:00"><meta itemprop=name content="Command Pattern"><meta itemprop=description content="2024"><meta itemprop=datePublished content="2024-05-10T00:00:00+00:00"><meta itemprop=dateModified content="2024-05-10T00:00:00+00:00"><meta itemprop=wordCount content="876"><meta itemprop=keywords content="interview,"><link rel=canonical href=https://karthikselvam.com/posts/2024/05/10/command_pattern/><link rel=dns-prefetch href=https://www.google-analytics.com><link href=https://www.google-analytics.com rel=preconnect crossorigin><link rel=alternate type=application/atom+xml title="Karthik Selvam" href=https://karthikselvam.com/atom.xml><link rel=alternate type=application/json title="Karthik Selvam" href=https://karthikselvam.com/feed.json><script src=https://kit.fontawesome.com/8d06e0a013.js crossorigin=anonymous></script>
<link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeSpeed}.posts hr{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:none;border-bottom:1px #353535;flex:1 0 1rem}main{max-width:70ch;padding:2ch;margin:auto}a,body{color:#353535}::selection,a:focus,a:hover{background-color:#353535;color:#fff}.meta{margin:0 0 2.5rem}.tags::before{content:"\2022";margin-left:1rem}code,pre{color:#353535;font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;border:1px solid #353535;font-size:small}code{padding:.1rem;border:none}pre{padding:.5rem;overflow-x:auto}pre code{border:none}img{max-width:100%;border:1px solid #353535}hr{background:#353535;height:1px;border:0}ul{list-style-type:square}ul,ol{padding-left:1.2rem}header li,footer li{display:inline;text-transform:uppercase}header a,footer a{text-decoration:none}header ul,footer ul{justify-content:space-between;display:flex}header,section,footer{padding:1rem 0}blockquote{border-left:5px solid #353535;padding-left:1rem}.posts ul,header ul,footer ul{list-style:none}.posts,header ul,footer ul{padding:0}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.7rem}.posts li a,.posts li div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.hash{opacity:.25;text-decoration:none}table{border-collapse:collapse;text-align:left;width:100%}table tr{background:#fff;border-bottom:1px solid}table th,table td{padding:10px 20px}</style><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Command Pattern","headline":"Command Pattern","alternativeHeadline":"","description":"2024","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/karthikselvam.com\/posts\/2024\/05\/10\/command_pattern\/"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"Karthik Selvam","copyrightYear":"2024","dateCreated":"2024-05-10T00:00:00.00Z","datePublished":"2024-05-10T00:00:00.00Z","dateModified":"2024-05-10T00:00:00.00Z","publisher":{"@type":"Organization","name":"Karthik Selvam","url":"https://karthikselvam.com/","logo":{"@type":"ImageObject","url":"https:\/\/karthikselvam.com\/","width":"32","height":"32"}},"image":"https://karthikselvam.com/","url":"https:\/\/karthikselvam.com\/posts\/2024\/05\/10\/command_pattern\/","wordCount":"876","genre":["interview"],"keywords":["interview"]}</script></head><body><main><header><nav><ul><li><a href=/>Blog</a></li><li><a href=/about/>@Karthik</a></li><li><a href=https://twitter.com/karthiikselvam><i class="fa-brands fa-twitter"></i></a>
&nbsp;&nbsp;
<a href=https://www.instagram.com/karthiikselvam/><i class="fa-brands fa-instagram"></i></a>
&nbsp;&nbsp;
<a href=https://www.linkedin.com/in/karthiiks/><i class="fa-brands fa-linkedin"></i></a></li></ul></nav></header><hr><section><h2 itemprop="name headline">Command Pattern</h2><p class=meta><time itemprop=datePublished datetime=2024-05-10>May 10, 2024</time> &bull;
<a href=/tags/interview>interview</a></p><span itemprop=articleBody><ol><li>Implement Transaction Management: Extend the Command Pattern implementation to support transaction management. This exercise will involve implementing methods to start, commit, and rollback transactions, where a transaction consists of multiple commands that are executed atomically.</li></ol><pre><code class=language-java>// Command interface
interface Command {
    void execute();
    void undo();
}

// Concrete command
class ConcreteCommand implements Command {
    private Receiver receiver;

    ConcreteCommand(Receiver receiver) {
        this.receiver = receiver;
    }

    public void execute() {
        receiver.action();
    }

    public void undo() {
        receiver.undoAction();
    }
}

// Receiver
class Receiver {
    void action() {
        System.out.println(&quot;Receiver is executing action...&quot;);
    }

    void undoAction() {
        System.out.println(&quot;Receiver is undoing action...&quot;);
    }
}

// Invoker
class Invoker {
    private List&lt;Command&gt; commands = new ArrayList&lt;&gt;();

    void addCommand(Command command) {
        commands.add(command);
    }

    void executeCommands() {
        for (Command command : commands) {
            command.execute();
        }
    }

    void undoCommands() {
        for (int i = commands.size() - 1; i &gt;= 0; i--) {
            commands.get(i).undo();
        }
    }
}

// Client
public class Client {
    public static void main(String[] args) {
        Receiver receiver = new Receiver();
        Invoker invoker = new Invoker();

        // Start transaction
        System.out.println(&quot;Starting transaction...&quot;);
        
        // Add commands to the transaction
        invoker.addCommand(new ConcreteCommand(receiver));
        invoker.addCommand(new ConcreteCommand(receiver));
        invoker.addCommand(new ConcreteCommand(receiver));

        // Execute commands
        invoker.executeCommands();

        // Commit transaction
        System.out.println(&quot;Committing transaction...&quot;);

        // Start another transaction
        System.out.println(&quot;Starting another transaction...&quot;);

        // Add commands to the new transaction
        invoker.addCommand(new ConcreteCommand(receiver));
        invoker.addCommand(new ConcreteCommand(receiver));

        // Execute commands
        invoker.executeCommands();

        // Rollback transaction
        System.out.println(&quot;Rolling back transaction...&quot;);
        invoker.undoCommands();
    }
}


</code></pre><ol start=2><li>Implement Remote Control for Devices: Create a remote control application that allows users to control various devices (e.g., lights, TV, stereo) using the Command Pattern. Each device action (e.g., turning on/off, changing volume) should be encapsulated as a command object.</li></ol><pre><code class=language-java>
// Receiver
class Light {
    void turnOn() {
        System.out.println(&quot;Light is on&quot;);
    }

    void turnOff() {
        System.out.println(&quot;Light is off&quot;);
    }
}

class TV {
    void turnOn() {
        System.out.println(&quot;TV is on&quot;);
    }

    void turnOff() {
        System.out.println(&quot;TV is off&quot;);
    }

    void changeVolume(int volume) {
        System.out.println(&quot;TV volume changed to &quot; + volume);
    }
}

// Command interface
interface Command {
    void execute();
}

// Concrete commands
class LightOnCommand implements Command {
    private Light light;

    LightOnCommand(Light light) {
        this.light = light;
    }

    public void execute() {
        light.turnOn();
    }
}

class LightOffCommand implements Command {
    private Light light;

    LightOffCommand(Light light) {
        this.light = light;
    }

    public void execute() {
        light.turnOff();
    }
}

class TVOnCommand implements Command {
    private TV tv;

    TVOnCommand(TV tv) {
        this.tv = tv;
    }

    public void execute() {
        tv.turnOn();
    }
}

class TVOffCommand implements Command {
    private TV tv;

    TVOffCommand(TV tv) {
        this.tv = tv;
    }

    public void execute() {
        tv.turnOff();
    }
}

class TVVolumeCommand implements Command {
    private TV tv;
    private int volume;

    TVVolumeCommand(TV tv, int volume) {
        this.tv = tv;
        this.volume = volume;
    }

    public void execute() {
        tv.changeVolume(volume);
    }
}

// Invoker
class RemoteControl {
    private Command command;

    void setCommand(Command command) {
        this.command = command;
    }

    void pressButton() {
        command.execute();
    }
}

// Client
public class RemoteControlClient {
    public static void main(String[] args) {
        // Create devices
        Light light = new Light();
        TV tv = new TV();

        // Create commands
        Command lightOn = new LightOnCommand(light);
        Command lightOff = new LightOffCommand(light);
        Command tvOn = new TVOnCommand(tv);
        Command tvOff = new TVOffCommand(tv);
        Command tvVolume = new TVVolumeCommand(tv, 20); // Set initial volume to 20

        // Create remote control
        RemoteControl remoteControl = new RemoteControl();

        // Associate commands with remote control buttons
        remoteControl.setCommand(lightOn); // Button 1 turns on the light
        remoteControl.pressButton();

        remoteControl.setCommand(tvOn); // Button 2 turns on the TV
        remoteControl.pressButton();

        remoteControl.setCommand(tvVolume); // Button 3 changes TV volume
        remoteControl.pressButton();

        remoteControl.setCommand(tvOff); // Button 4 turns off the TV
        remoteControl.pressButton();

        remoteControl.setCommand(lightOff); // Button 5 turns off the light
        remoteControl.pressButton();
    }
}


</code></pre><ol start=3><li>Implement Undo/Redo functionality: Enhance the Command Pattern implementation to support undo and redo operations. This exercise will require you to maintain a history of executed commands and implement methods to undo and redo commands.</li></ol><pre><code class=language-java>
import java.util.Stack;

// Receiver
class Light {
    void turnOn() {
        System.out.println(&quot;Light is on&quot;);
    }

    void turnOff() {
        System.out.println(&quot;Light is off&quot;);
    }
}

// Command interface
interface Command {
    void execute();
    void undo();
}

// Concrete commands
class LightOnCommand implements Command {
    private Light light;

    LightOnCommand(Light light) {
        this.light = light;
    }

    public void execute() {
        light.turnOn();
    }

    public void undo() {
        light.turnOff();
    }
}

class LightOffCommand implements Command {
    private Light light;

    LightOffCommand(Light light) {
        this.light = light;
    }

    public void execute() {
        light.turnOff();
    }

    public void undo() {
        light.turnOn();
    }
}

// Invoker
class RemoteControl {
    private Stack&lt;Command&gt; undoStack = new Stack&lt;&gt;();
    private Stack&lt;Command&gt; redoStack = new Stack&lt;&gt;();

    void executeCommand(Command command) {
        command.execute();
        undoStack.push(command);
        redoStack.clear(); // Clear redo stack when a new command is executed
    }

    void undo() {
        if (!undoStack.isEmpty()) {
            Command command = undoStack.pop();
            command.undo();
            redoStack.push(command);
        } else {
            System.out.println(&quot;Nothing to undo&quot;);
        }
    }

    void redo() {
        if (!redoStack.isEmpty()) {
            Command command = redoStack.pop();
            command.execute();
            undoStack.push(command);
        } else {
            System.out.println(&quot;Nothing to redo&quot;);
        }
    }
}

// Client
public class RemoteControlClient {
    public static void main(String[] args) {
        // Create devices
        Light light = new Light();

        // Create commands
        Command lightOn = new LightOnCommand(light);
        Command lightOff = new LightOffCommand(light);

        // Create remote control
        RemoteControl remoteControl = new RemoteControl();

        // Execute commands
        remoteControl.executeCommand(lightOn); // Turn on the light
        remoteControl.executeCommand(lightOff); // Turn off the light

        // Undo the last command
        remoteControl.undo(); // Should turn on the light

        // Redo the last undone command
        remoteControl.redo(); // Should turn off the light
    }
}


</code></pre></span></section><hr><footer><nav><ul><li>© 2025 Karthik Selvam</li><li><a href=https://twitter.com/karthiikselvam><i class="fa-brands fa-twitter"></i></a>
&nbsp;&nbsp;
<a href=https://www.instagram.com/karthiikselvam/><i class="fa-brands fa-instagram"></i></a>
&nbsp;&nbsp;
<a href=https://www.linkedin.com/in/karthiiks/><i class="fa-brands fa-linkedin"></i></a></li></ul></nav></footer></main></body></html>